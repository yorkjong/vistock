<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>vistock.stock_indices &mdash; vistock 0.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=fe7df9b0"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            vistock
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">Read Me</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Source</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">vistock</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">vistock.stock_indices</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for vistock.stock_indices</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions for retrieving and managing stock market indices data.</span>

<span class="sd">This module provides functions for retrieving ticker symbols for various stock</span>
<span class="sd">market indices and identifying index names from their ticker symbols. It</span>
<span class="sd">supports querying index tickers from specified sources and obtaining the name</span>
<span class="sd">of an index based on its symbol.</span>

<span class="sd">Main Functions:</span>
<span class="sd">~~~~~~~~~~~~~~~</span>
<span class="sd">- get_tickers(source): Retrieve ticker symbols for a specified stock market</span>
<span class="sd">  index source.</span>
<span class="sd">- get_name(index_symbol): Retrieve the name of an index from its ticker symbol.</span>
<span class="sd">- ticker_from_name(name): Get the ticker symbol of an index from its long name.</span>

<span class="sd">Usage Examples:</span>
<span class="sd">~~~~~~~~~~~~~~~</span>
<span class="sd">::</span>

<span class="sd">    from stock_indices import get_tickers, get_name</span>

<span class="sd">    # Get tickers for the S&amp;P 500 index</span>
<span class="sd">    spx_tickers = get_tickers(&#39;SPX&#39;)</span>

<span class="sd">    # Get tickers for the Philadelphia Semiconductor</span>
<span class="sd">    sox_tickers = get_tickers(&#39;SOX&#39;)</span>

<span class="sd">    # Get tickers for the SPX and the SOX</span>
<span class="sd">    tickers = get_tickers(&#39;SPX+SOX&#39;)</span>

<span class="sd">    # Get the name of an index from its symbol</span>
<span class="sd">    index_name = get_name(&#39;^NDX&#39;)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;2.8&quot;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;York &lt;york.jong@gmail.com&gt;&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s2">&quot;2024/08/06 (initial version) ~ 2024/10/01 (last revision)&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;get_tickers&#39;</span><span class="p">,</span>
    <span class="s1">&#39;get_name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ticker_from_name&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">yfinance</span> <span class="k">as</span> <span class="nn">yf</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">tw</span>

<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># Wikipedia look-up</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">table_from_wikipedia</span><span class="p">(</span><span class="n">article</span><span class="p">,</span> <span class="n">class_</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches a table from a Wikipedia article and returns it as a pandas</span>
<span class="sd">    DataFrame.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    article: str</span>
<span class="sd">        The name of the Wikipedia article.</span>
<span class="sd">    class_: str</span>
<span class="sd">        The class attribute of the table to retrieve.</span>
<span class="sd">    id: str</span>
<span class="sd">        The id attribute of the table to retrieve.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pandas.DataFrame</span>
<span class="sd">        The retrieved table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://en.wikipedia.org/wiki/</span><span class="si">{</span><span class="n">article</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">class_</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">class_</span>
    <span class="k">if</span> <span class="nb">id</span><span class="p">:</span>
        <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">id</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tag</span><span class="p">)))[</span><span class="mi">0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">symbols_from_wikipedia_table</span><span class="p">(</span><span class="n">article</span><span class="p">,</span>
                                 <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;wikitable sortable&#39;</span><span class="p">,</span>
                                 <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;constituents&#39;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts stock symbols from a table in a Wikipedia article.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    article: str</span>
<span class="sd">        The name of the Wikipedia article.</span>
<span class="sd">    class_: str, optional</span>
<span class="sd">        The class attribute of the table. Defaults to &#39;wikitable sortable&#39;.</span>
<span class="sd">    id: str, optional</span>
<span class="sd">        The id attribute of the table. Defaults to &#39;constituents&#39;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of stock symbols.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">table_from_wikipedia</span><span class="p">(</span><span class="n">article</span><span class="p">,</span> <span class="n">class_</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;Symbol&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">elif</span> <span class="s1">&#39;Ticker&#39;</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Ticker&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">[]</span>


<span class="n">spx_tickers</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">symbols_from_wikipedia_table</span><span class="p">,</span> <span class="s1">&#39;List_of_S%26P_500_companies&#39;</span><span class="p">,</span>
        <span class="n">class_</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">djia_tickers</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">symbols_from_wikipedia_table</span><span class="p">,</span> <span class="s1">&#39;Dow_Jones_Industrial_Average&#39;</span><span class="p">)</span>
<span class="n">ndx_tickers</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">symbols_from_wikipedia_table</span><span class="p">,</span> <span class="s1">&#39;Nasdaq-100&#39;</span><span class="p">)</span>
<span class="n">rui_tickers</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">symbols_from_wikipedia_table</span><span class="p">,</span> <span class="s1">&#39;Russell_1000_Index&#39;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># bullishbears.com look-up</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">table_from_bullishbears</span><span class="p">(</span><span class="n">article</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches the first table from a specified Bullish Bears article.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    article: str</span>
<span class="sd">        The relative path of the article on the Bullish Bears website.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pd.DataFrame</span>
<span class="sd">        The first table found in the specified URL, parsed into a Pandas DataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://bullishbears.com/</span><span class="si">{</span><span class="n">article</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>


<span class="k">def</span> <span class="nf">symbols_from_bullishbears_table</span><span class="p">(</span><span class="n">article</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts stock symbols from a table in a Bullish Bears article.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    article: str</span>
<span class="sd">        The relative path of the article on the Bullish Bears website.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of stock symbols from the table&#39;s &quot;Symbol&quot; column.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; symbols = symbols_from_bullishbears_table(&#39;sp500-stocks-list&#39;)</span>
<span class="sd">    &gt;&gt;&gt; len(symbols)</span>
<span class="sd">    502</span>
<span class="sd">    &gt;&gt;&gt; symbols = symbols_from_bullishbears_table(&#39;dow-jones-stocks-list&#39;)</span>
<span class="sd">    &gt;&gt;&gt; len(symbols)</span>
<span class="sd">    30</span>
<span class="sd">    &gt;&gt;&gt; symbols = symbols_from_bullishbears_table(&#39;nasdaq-stocks-list&#39;)</span>
<span class="sd">    &gt;&gt;&gt; len(symbols)</span>
<span class="sd">    100</span>
<span class="sd">    &gt;&gt;&gt; symbols = symbols_from_bullishbears_table(&#39;russell-2000-stocks-list&#39;)</span>
<span class="sd">    &gt;&gt;&gt; &#39;SMCI&#39; in symbols</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(symbols) &gt; 1990</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">table_from_bullishbears</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">symbols</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">)]</span>


<span class="n">rut_tickers</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span>
        <span class="n">symbols_from_bullishbears_table</span><span class="p">,</span> <span class="s1">&#39;russell-2000-stocks-list&#39;</span><span class="p">)</span>


<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># StatementDog.com look-up</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">us_listed_tickers</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches all symbols of U.S. listed stocks from the StatementDog US stock</span>
<span class="sd">    list page and returns them as a list.</span>

<span class="sd">    This function mimics the Wilshire 5000 Index by using the StatementDog</span>
<span class="sd">    website&#39;s US stock list as a proxy for all listed U.S. stocks. The list</span>
<span class="sd">    includes stocks from both the New York Stock Exchange (NYSE) and the</span>
<span class="sd">    NASDAQ, and serves as a comprehensive dataset of publicly traded companies</span>
<span class="sd">    in the U.S.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of stock symbols from the StatementDog US stock list.</span>
<span class="sd">        Returns an empty list if the request fails.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; tickers = us_listed_tickers()</span>
<span class="sd">    &gt;&gt;&gt; len(tickers) &gt; 5000</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; &#39;AAPL&#39; in tickers</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># URL of the target page</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://statementdog.com/us-stock-list&#39;</span>

    <span class="c1"># Request the web page content</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="c1"># Ensure the request was successful</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to retrieve the page.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Parse the HTML using BeautifulSoup</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>

    <span class="c1"># Find all &lt;span&gt; elements with the class &#39;us-stock-company-ticker&#39;</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">span</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">span</span>
               <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;us-stock-company-ticker&#39;</span><span class="p">)]</span>

    <span class="k">return</span> <span class="n">symbols</span>


<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># Manually keyed stock list</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">sox_tickers</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of tickers for companies in the SOX (PHLX Semiconductor).</span>

<span class="sd">    This function returns a manually maintained list of SOX tickers.</span>

<span class="sd">    Note</span>
<span class="sd">    ----</span>
<span class="sd">    This list may not be up-to-date and requires periodic updates.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of SOX tickers.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; tickers = sox_tickers()</span>
<span class="sd">    &gt;&gt;&gt; len(tickers) == 30</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; &#39;NVDA&#39; in tickers</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; &#39;AVGO&#39; in tickers</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; &#39;TSM&#39; in tickers</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;AMD&#39;</span><span class="p">,</span> <span class="s1">&#39;ADI&#39;</span><span class="p">,</span> <span class="s1">&#39;AMAT&#39;</span><span class="p">,</span> <span class="s1">&#39;ASML&#39;</span><span class="p">,</span> <span class="s1">&#39;AZTA&#39;</span><span class="p">,</span> <span class="s1">&#39;AVGO&#39;</span><span class="p">,</span> <span class="s1">&#39;COHR&#39;</span><span class="p">,</span> <span class="s1">&#39;ENTG&#39;</span><span class="p">,</span> <span class="s1">&#39;GFS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;INTC&#39;</span><span class="p">,</span> <span class="s1">&#39;IPGP&#39;</span><span class="p">,</span> <span class="s1">&#39;KLAC&#39;</span><span class="p">,</span> <span class="s1">&#39;LRCX&#39;</span><span class="p">,</span> <span class="s1">&#39;LSCC&#39;</span><span class="p">,</span> <span class="s1">&#39;MRVL&#39;</span><span class="p">,</span> <span class="s1">&#39;MCHP&#39;</span><span class="p">,</span> <span class="s1">&#39;MU&#39;</span><span class="p">,</span> <span class="s1">&#39;MPWR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NOVT&#39;</span><span class="p">,</span> <span class="s1">&#39;NVDA&#39;</span><span class="p">,</span> <span class="s1">&#39;NXPI&#39;</span><span class="p">,</span> <span class="s1">&#39;ON&#39;</span><span class="p">,</span> <span class="s1">&#39;QRVO&#39;</span><span class="p">,</span> <span class="s1">&#39;QCOM&#39;</span><span class="p">,</span> <span class="s1">&#39;SWKS&#39;</span><span class="p">,</span> <span class="s1">&#39;SYNA&#39;</span><span class="p">,</span> <span class="s1">&#39;TSM&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TER&#39;</span><span class="p">,</span> <span class="s1">&#39;TXN&#39;</span><span class="p">,</span> <span class="s1">&#39;WOLF&#39;</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">tickers</span>

<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># Published Functions</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<div class="viewcode-block" id="get_tickers">
<a class="viewcode-back" href="../../vistock.html#vistock.stock_indices.get_tickers">[docs]</a>
<span class="k">def</span> <span class="nf">get_tickers</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve a list of tickers for the specified index or combined indices.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    source: str</span>
<span class="sd">        The ticker symbol or common abbreviation for the index or indices.</span>

<span class="sd">        - Yahoo Finance ticker symbols (e.g., &#39;^GSPC&#39; for S&amp;P 500, &#39;^NDX&#39;</span>
<span class="sd">          for NASDAQ-100).</span>
<span class="sd">        - Common abbreviations (e.g., &#39;SPX&#39; for S&amp;P 500, &#39;NDX&#39; for</span>
<span class="sd">          NASDAQ-100).</span>
<span class="sd">        - Multiple indices can be combined using &#39;+&#39; (e.g., &#39;^GSPC+^NDX&#39;).</span>

<span class="sd">        Possible values include:</span>

<span class="sd">        - &#39;^GSPC&#39;, &#39;SPX&#39;: S&amp;P 500</span>
<span class="sd">        - &#39;^DJI&#39;, &#39;DJIA&#39;: Dow Jones Industrial Average</span>
<span class="sd">        - &#39;^NDX&#39;, &#39;NDX&#39;: NASDAQ-100</span>
<span class="sd">        - &#39;^RUI&#39;, &#39;RUI&#39;: Russell 1000</span>
<span class="sd">        - &#39;^RUT&#39;, &#39;RUT&#39;: Russell 2000</span>
<span class="sd">        - &#39;^SOX&#39;, &#39;SOX&#39;: PHLX Semiconductor</span>
<span class="sd">        - &#39;^W5000&#39;, &#39;W5000&#39;: Wilshire 5000 Total Market Index</span>
<span class="sd">        - &#39;U.S. listed&#39;: U.S. listed stocks</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of tickers for the specified source.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    KeyError</span>
<span class="sd">        If the provided source is not recognized or does not</span>
<span class="sd">        correspond to a known index.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;SPX&#39;)) &gt;= 500</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;^GSPC&#39;)) &gt;= 500</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;^NDX&#39;)) &gt;= 100</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;^RUI&#39;)) &gt;= 1000</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;^RUT&#39;)) &gt; 1900</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;^W5000&#39;)) &gt; 5000</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;U.S.Listed&#39;)) &gt; 5000</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; len(get_tickers(&#39;USLS&#39;)) &gt; 5000</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; 500 &lt; len(get_tickers(&#39;^GSPC+^NDX&#39;)) &lt; (500+100)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; 500 &lt; len(get_tickers(&#39;SPX+SOX+NDX&#39;)) &lt; (500+30+100)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; get_tickers(&#39;^UNKNOWN&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    KeyError: &quot;Index symbol &#39;^UNKNOWN&#39; not found.&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;^GSPC&#39;</span><span class="p">:</span> <span class="n">spx_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^DJI&#39;</span><span class="p">:</span> <span class="n">djia_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^NDX&#39;</span><span class="p">:</span> <span class="n">ndx_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^RUI&#39;</span><span class="p">:</span> <span class="n">rui_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^RUT&#39;</span><span class="p">:</span> <span class="n">rut_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^SOX&#39;</span><span class="p">:</span> <span class="n">sox_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^W5000&#39;</span><span class="p">:</span> <span class="n">us_listed_tickers</span><span class="p">,</span>
        <span class="s1">&#39;^TWII&#39;</span><span class="p">:</span> <span class="n">tw</span><span class="o">.</span><span class="n">get_twse_tickers</span><span class="p">,</span>
        <span class="s1">&#39;SPX&#39;</span><span class="p">:</span> <span class="n">spx_tickers</span><span class="p">,</span>
        <span class="s1">&#39;DJIA&#39;</span><span class="p">:</span> <span class="n">djia_tickers</span><span class="p">,</span>
        <span class="s1">&#39;NDX&#39;</span><span class="p">:</span> <span class="n">ndx_tickers</span><span class="p">,</span>
        <span class="s1">&#39;SOX&#39;</span><span class="p">:</span> <span class="n">sox_tickers</span><span class="p">,</span>
        <span class="s1">&#39;RUI&#39;</span><span class="p">:</span> <span class="n">rui_tickers</span><span class="p">,</span>
        <span class="s1">&#39;RUT&#39;</span><span class="p">:</span> <span class="n">rut_tickers</span><span class="p">,</span>
        <span class="s1">&#39;R1000&#39;</span><span class="p">:</span> <span class="n">rui_tickers</span><span class="p">,</span>
        <span class="s1">&#39;R2000&#39;</span><span class="p">:</span> <span class="n">rut_tickers</span><span class="p">,</span>
        <span class="s1">&#39;W5000&#39;</span><span class="p">:</span> <span class="n">us_listed_tickers</span><span class="p">,</span>
        <span class="s1">&#39;U.S.LISTED&#39;</span><span class="p">:</span> <span class="n">us_listed_tickers</span><span class="p">,</span>
        <span class="s1">&#39;USLS&#39;</span><span class="p">:</span> <span class="n">us_listed_tickers</span><span class="p">,</span>
        <span class="s1">&#39;TWII&#39;</span><span class="p">:</span> <span class="n">tw</span><span class="o">.</span><span class="n">get_twse_tickers</span><span class="p">,</span>
        <span class="s1">&#39;TWSE&#39;</span><span class="p">:</span> <span class="n">tw</span><span class="o">.</span><span class="n">get_twse_tickers</span><span class="p">,</span>
        <span class="s1">&#39;TPEX&#39;</span><span class="p">:</span> <span class="n">tw</span><span class="o">.</span><span class="n">get_tpex_tickers</span><span class="p">,</span>
        <span class="s1">&#39;ESB&#39;</span><span class="p">:</span> <span class="n">tw</span><span class="o">.</span><span class="n">get_esb_tickers</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">)]</span>
    <span class="n">tickers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sources</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
            <span class="n">tickers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dic</span><span class="p">[</span><span class="n">s</span><span class="p">]())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Index symbol &#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s2">&#39; not found.&quot;</span><span class="p">)</span>

    <span class="n">symbols</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">tickers</span><span class="p">))</span>

    <span class="c1"># Filter out symbols containing &#39;.&#39;, such as SPAC units or preferred</span>
    <span class="c1"># stocks, which may not be supported by yfinance</span>

    <span class="c1"># Filter out symbols containing &#39;.&#39;, except for Taiwan stocks (.TW, .TWO),</span>
    <span class="c1"># as others may not be supported by yfinance</span>
    <span class="n">symbols</span> <span class="o">=</span> <span class="p">[</span><span class="n">symbol</span> <span class="k">for</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">symbols</span>
               <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">symbol</span> <span class="ow">or</span> <span class="n">symbol</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s1">&#39;.TW&#39;</span><span class="p">,</span> <span class="s1">&#39;.TWO&#39;</span><span class="p">))]</span>

    <span class="k">return</span> <span class="n">symbols</span></div>



<div class="viewcode-block" id="ticker_from_name">
<a class="viewcode-back" href="../../vistock.html#vistock.stock_indices.ticker_from_name">[docs]</a>
<span class="k">def</span> <span class="nf">ticker_from_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get ticker symbol of an index from its long name.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name: str</span>
<span class="sd">        The long name of a ticker.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The ticker symbol.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;S&amp;P 500&#39;)</span>
<span class="sd">    &#39;^GSPC&#39;</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;Dow Jones Industrial Average&#39;)</span>
<span class="sd">    &#39;^DJI&#39;</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;NASDAQ 100&#39;)</span>
<span class="sd">    &#39;^NDX&#39;</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;Russell 1000&#39;)</span>
<span class="sd">    &#39;^RUI&#39;</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;Wilshire 5000 Total Market Index&#39;)</span>
<span class="sd">    &#39;^W5000&#39;</span>
<span class="sd">    &gt;&gt;&gt; ticker_from_name(&#39;Taiwan Weighted Index&#39;)</span>
<span class="sd">    &#39;^TWII&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;S&amp;P 500&quot;</span><span class="p">:</span> <span class="s2">&quot;^GSPC&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Dow Jones Industrial Average&quot;</span><span class="p">:</span> <span class="s2">&quot;^DJI&quot;</span><span class="p">,</span>
        <span class="s2">&quot;NASDAQ 100&quot;</span><span class="p">:</span> <span class="s2">&quot;^NDX&quot;</span><span class="p">,</span>
        <span class="s1">&#39;NASDAQ Composite&#39;</span><span class="p">:</span> <span class="s2">&quot;^IXIC&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Russell 1000&quot;</span><span class="p">:</span> <span class="s2">&quot;^RUI&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Russell 2000&quot;</span><span class="p">:</span> <span class="s2">&quot;^RUT&quot;</span><span class="p">,</span>
        <span class="s2">&quot;PHLX Semiconductor&quot;</span><span class="p">:</span> <span class="s2">&quot;^SOX&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Wilshire 5000 Total Market Index&quot;</span><span class="p">:</span> <span class="s2">&quot;^W5000&quot;</span><span class="p">,</span>
        <span class="s2">&quot;U.S. Listed Stocks&quot;</span><span class="p">:</span> <span class="s2">&quot;USLS&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Taiwan Weighted Index&quot;</span><span class="p">:</span> <span class="s2">&quot;^TWII&quot;</span><span class="p">,</span>
        <span class="s1">&#39;Euro Stoxx 50&#39;</span><span class="p">:</span> <span class="s1">&#39;^STOXX50E&#39;</span><span class="p">,</span>       <span class="c1"># Europe</span>
        <span class="s1">&#39;FTSE 100&#39;</span><span class="p">:</span> <span class="s1">&#39;^FTSE&#39;</span><span class="p">,</span>                <span class="c1"># London, UK</span>
        <span class="s1">&#39;DAX&#39;</span><span class="p">:</span> <span class="s1">&#39;^GDAXI&#39;</span><span class="p">,</span>                    <span class="c1"># Frankfurt, Germany</span>
        <span class="s1">&#39;CAC 40&#39;</span><span class="p">:</span> <span class="s1">&#39;^FCHI&#39;</span><span class="p">,</span>                  <span class="c1"># Paris, France</span>
        <span class="s1">&#39;S&amp;P/TSX Composite&#39;</span><span class="p">:</span> <span class="s1">&#39;^GSPTSE&#39;</span><span class="p">,</span>     <span class="c1"># Canada</span>
        <span class="s1">&#39;Nikkei 225&#39;</span><span class="p">:</span> <span class="s1">&#39;^N225&#39;</span><span class="p">,</span>              <span class="c1"># Japan</span>
        <span class="s1">&#39;Hang Seng Index&#39;</span><span class="p">:</span> <span class="s1">&#39;^HSI&#39;</span><span class="p">,</span>          <span class="c1"># Hong Kong</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">dic</span><span class="p">[</span><span class="n">name</span><span class="p">]</span></div>



<div class="viewcode-block" id="get_name">
<a class="viewcode-back" href="../../vistock.html#vistock.stock_indices.get_name">[docs]</a>
<span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="n">index_symbol</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the name of the index based on the provided symbol.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    index_symbol: str</span>
<span class="sd">        The ticker symbol or common abbreviation for the index.</span>

<span class="sd">        - Yahoo Finance ticker symbols (e.g., &#39;^GSPC&#39; for S&amp;P 500, &#39;^NDX&#39; for</span>
<span class="sd">          NASDAQ-100).</span>
<span class="sd">        - Common abbreviations (e.g., &#39;SPX&#39; for S&amp;P 500, &#39;NDX&#39; for</span>
<span class="sd">          NASDAQ-100).</span>

<span class="sd">        Possible values include:</span>

<span class="sd">        - &#39;^GSPC&#39;, &#39;SPX&#39;: S&amp;P 500</span>
<span class="sd">        - &#39;^DJI&#39;, &#39;DJIA&#39;: Dow Jones Industrial Average</span>
<span class="sd">        - &#39;^NDX&#39;, &#39;NDX&#39;: NASDAQ 100</span>
<span class="sd">        - &#39;^IXIC&#39;, &#39;COMP&#39;: NASDAQ Composite</span>
<span class="sd">        - &#39;^RUI&#39;, &#39;RUI&#39;, &#39;R1000&#39;: Russell 1000</span>
<span class="sd">        - &#39;^RUT&#39;, &#39;RUT&#39;, &#39;R2000&#39;: Russell 2000</span>
<span class="sd">        - &#39;^SOX&#39;, &#39;SOX&#39;: PHLX Semiconductor</span>
<span class="sd">        - &#39;^NYA&#39;, &#39;NYA&#39;: NYSE Composite</span>
<span class="sd">        - &#39;^MID&#39;, &#39;MID&#39;: S&amp;P MidCap 400</span>
<span class="sd">        - &#39;^TWII&#39;, &#39;TWII&#39;: Taiwan Weighted Index</span>
<span class="sd">        - &#39;^W5000&#39;, &#39;W5000&#39;: Wilshire 5000 Total Market Index</span>
<span class="sd">        - &#39;USLS&#39;: U.S. Listed Stocks</span>
<span class="sd">        - &#39;^STOXX50E&#39;: Euro Stoxx 50</span>
<span class="sd">        - &#39;^FTSE&#39;: FTSE 100</span>
<span class="sd">        - &#39;^GDAXI&#39;: DAX</span>
<span class="sd">        - &#39;^FCHI&#39;: CAC 40</span>
<span class="sd">        - &#39;^GSPTSE&#39;: S&amp;P/TSX Composite</span>
<span class="sd">        - &#39;^N225&#39;: Nikkei 225</span>
<span class="sd">        - &#39;^HSI&#39;: Hang Seng Index</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The name of the index if found. If not found, returns the original index_symbol.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;SPX&#39;)</span>
<span class="sd">    &#39;S&amp;P 500&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^GSPC&#39;)</span>
<span class="sd">    &#39;S&amp;P 500&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^DJI&#39;)</span>
<span class="sd">    &#39;Dow Jones Industrial Average&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^IXIC&#39;)</span>
<span class="sd">    &#39;NASDAQ Composite&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^NDX&#39;)</span>
<span class="sd">    &#39;NASDAQ 100&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^RUI&#39;)</span>
<span class="sd">    &#39;Russell 1000&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^RUT&#39;)</span>
<span class="sd">    &#39;Russell 2000&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^SOX&#39;)</span>
<span class="sd">    &#39;PHLX Semiconductor&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^W5000&#39;)</span>
<span class="sd">    &#39;Wilshire 5000 Total Market Index&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^TWII&#39;)</span>
<span class="sd">    &#39;Taiwan Weighted Index&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;^HSI&#39;)</span>
<span class="sd">    &#39;Hang Seng Index&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;SOXX&#39;)</span>
<span class="sd">    &#39;iShares Semiconductor ETF&#39;</span>
<span class="sd">    &gt;&gt;&gt; get_name(&#39;AAPL&#39;)</span>
<span class="sd">    &#39;AAPL&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;^GSPC&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;P 500&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^DJI&#39;</span><span class="p">:</span> <span class="s1">&#39;Dow Jones Industrial Average&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^NDX&#39;</span><span class="p">:</span> <span class="s1">&#39;NASDAQ 100&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^IXIC&#39;</span><span class="p">:</span> <span class="s1">&#39;NASDAQ Composite&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^RUI&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 1000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^RUT&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 2000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^SOX&#39;</span><span class="p">:</span> <span class="s1">&#39;PHLX Semiconductor&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^W5000&#39;</span><span class="p">:</span> <span class="s1">&#39;Wilshire 5000 Total Market Index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^NYA&#39;</span><span class="p">:</span> <span class="s1">&#39;NYSE Composite&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^MID&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;P MidCap 400&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^TWII&#39;</span><span class="p">:</span> <span class="s1">&#39;Taiwan Weighted Index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SPX&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;P 500&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DJIA&#39;</span><span class="p">:</span> <span class="s1">&#39;Dow Jones Industrial Average&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NDX&#39;</span><span class="p">:</span> <span class="s1">&#39;NASDAQ 100&#39;</span><span class="p">,</span>
        <span class="s1">&#39;COMP&#39;</span><span class="p">:</span> <span class="s1">&#39;NASDAQ Composite&#39;</span><span class="p">,</span>
        <span class="s1">&#39;RUI&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 1000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;RUT&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 2000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;R1000&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 1000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;R2000&#39;</span><span class="p">:</span> <span class="s1">&#39;Russell 2000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SOX&#39;</span><span class="p">:</span> <span class="s1">&#39;PHLX Semiconductor&#39;</span><span class="p">,</span>
        <span class="s1">&#39;W5000&#39;</span><span class="p">:</span> <span class="s1">&#39;Wilshire 5000 Total Market Index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;USLS&#39;</span><span class="p">:</span> <span class="s1">&#39;U.S. Listed Stocks&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NYA&#39;</span><span class="p">:</span> <span class="s1">&#39;NYSE Composite&#39;</span><span class="p">,</span>
        <span class="s1">&#39;MID&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;P MidCap 400&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TWII&#39;</span><span class="p">:</span> <span class="s1">&#39;Taiwan Weighted Index&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TWSE&#39;</span><span class="p">:</span> <span class="s1">&#39;Taiwan Stock Exchange&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TPEX&#39;</span><span class="p">:</span> <span class="s1">&#39;Taipei Exchange&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ESB&#39;</span><span class="p">:</span> <span class="s1">&#39;Emerging Stock Boar&#39;</span><span class="p">,</span>
        <span class="s1">&#39;^STOXX50E&#39;</span><span class="p">:</span> <span class="s1">&#39;Euro Stoxx 50&#39;</span><span class="p">,</span>       <span class="c1"># Europe</span>
        <span class="s1">&#39;^FTSE&#39;</span><span class="p">:</span> <span class="s1">&#39;FTSE 100&#39;</span><span class="p">,</span>                <span class="c1"># London, UK</span>
        <span class="s1">&#39;^GDAXI&#39;</span><span class="p">:</span> <span class="s1">&#39;DAX&#39;</span><span class="p">,</span>                    <span class="c1"># Frankfurt, Germany</span>
        <span class="s1">&#39;^FCHI&#39;</span><span class="p">:</span> <span class="s1">&#39;CAC 40&#39;</span><span class="p">,</span>                  <span class="c1"># Paris, France</span>
        <span class="s1">&#39;^GSPTSE&#39;</span><span class="p">:</span> <span class="s1">&#39;S&amp;P/TSX Composite&#39;</span><span class="p">,</span>     <span class="c1"># Canada</span>
        <span class="s1">&#39;^N225&#39;</span><span class="p">:</span> <span class="s1">&#39;Nikkei 225&#39;</span><span class="p">,</span>              <span class="c1"># Japan</span>
        <span class="s1">&#39;^HSI&#39;</span><span class="p">:</span> <span class="s1">&#39;Hang Seng Index&#39;</span><span class="p">,</span>          <span class="c1"># Hong Kong</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">index_symbol</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dic</span><span class="p">[</span><span class="n">index_symbol</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">tw</span><span class="o">.</span><span class="n">is_chinese</span><span class="p">(</span><span class="n">index_symbol</span><span class="p">)</span> <span class="ow">or</span> <span class="n">tw</span><span class="o">.</span><span class="n">is_taiwan_stock</span><span class="p">(</span><span class="n">index_symbol</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">index_symbol</span>
        <span class="k">if</span> <span class="n">yf</span><span class="o">.</span><span class="n">Ticker</span><span class="p">(</span><span class="n">index_symbol</span><span class="p">)</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;quoteType&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;ETF&#39;</span><span class="p">,</span> <span class="s1">&#39;INDEX&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">yf</span><span class="o">.</span><span class="n">Ticker</span><span class="p">(</span><span class="n">index_symbol</span><span class="p">)</span><span class="o">.</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">index_symbol</span></div>



<span class="c1">#------------------------------------------------------------------------------</span>
<span class="c1"># Test</span>
<span class="c1">#------------------------------------------------------------------------------</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span><span class="o">,</span> <span class="nn">time</span>

    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Execution time: </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start_time</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, York Jong.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>